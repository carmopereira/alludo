<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="mobile-web-app-capable" content="yes" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href='https://fonts.googleapis.com/css?family=Roboto:400,300italic,300,400italic,500,700,700italic,500italic' rel='stylesheet' type='text/css'>
<title>ALLUDO</title>

<script src="components/loader.js"></script>
<script src="lib/onsenui/js/onsenui.js"></script>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/menu.css" type="text/css" />

<link rel="stylesheet" href="lib/onsenui/css/onsenui.css" type="text/css" media="all" />
<link rel="stylesheet" href="lib/onsenui/css/onsen-css-components.css" type="text/css" media="all" />
<link rel="stylesheet" href="css/pure060/pure-min.css">
<link rel="stylesheet" href="css/pure060/grids.css">

<script type="text/javascript" src="js/mustache.min.js"></script>

</head>
<body>

<ons-splitter>
  <ons-splitter-side side="left" swipeable collapse="all" width="200px">
    <ons-page style="background-color:#1D1E1F">
       <ons-list style="border: 0; letter-spacing: 1px;font-family: 'neou_thin';font-size: 10pt;padding-left: 12px;background-color:#1D1E1F;padding-top:40px;">
        <ons-list-item modifier="tappable" style="color:white" onclick="javascript:mostraDIV('ceu');"><i class="fa fa-music"></i> CÉU</ons-list-item>
        <ons-list-item modifier="tappable" style="color:white" onclick="javascript:mostraDIV('terra');"><i class="fa fa-music"></i> TERRA</ons-list-item>
        <ons-list-item modifier="tappable" style="color:white" onclick="javascript:mostraDIV('neve')"><i class="fa fa-music"></i> NEVE</ons-list-item>
        
        <ons-list-item modifier="tappable" style="color:white" onclick="javascript:mostraDIV('circo')"><i class="fa fa-music"></i> CIRCO</ons-list-item>
        <ons-list-item modifier="tappable" style="color:white" onclick="javascript:mostraDIV('estendal')"><i class="fa fa-music"></i> ESTENDAL</ons-list-item>
        <ons-list-item modifier="tappable" style="color:white" onclick="javascript:mostraDIV('mar')"><i class="fa fa-music"></i> MAR</ons-list-item>
        
        <ons-list-item modifier="tappable" style="color:white" onclick="javascript:mostraDIV('sobre');" style="text-align:right">SOBRE</ons-list-item>
        <ons-list-item id="android_exit" modifier="tappable" style="color:white;display:none" onclick="navigator.app.exitApp();" style="text-align:right">SAIR</ons-list-item> 
      </ons-list>
      <ons-bottom-toolbar style="border:0;background-color:#1D1E1F; text-align: center; line-height: 44px; color:white">
        <div><span style="font-family:neou_thin;letter-spacing: 1px">ALLUDO</span>
          <span style="font-family:neou_thin;letter-spacing: 1px; font-size:8pt">v1.0.0</span><br>
          for education
        </div>
      </ons-bottom-toolbar>
    </ons-page>
  </ons-splitter-side>

  <ons-splitter-content>

    <div style="display:none" id="ceu">  
      <ons-page style="background-image:url('./images/Ceu_fundo.jpg'); background-size:cover">
        <div class="left">
          <ons-icon icon="ion-navicon" style="font-size: 32px; width: 1em; color: silver; padding-left: 10px;" onclick="document.querySelector('ons-splitter').toggleLeft();"></ons-icon>
        </div>
        <div class="pure-g" id="containerceu" style="height:100%;width: auto; ">
          <div>
            <audio id='estrela1' src='mp3/A3.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='estrela2' src='mp3/A4.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='estrela3' src='mp3/A1.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='estrela4' src='mp3/A5.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='estrela5' src='mp3/A2.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
          </div>
          <div class="ceu_estrela1">
            <a href="javascript:EvalSound('estrela1');">
              <img src="images/Estrela.png" style="width:90px">
            </a>
          </div>
          <div class="ceu_estrela2">
            <a href="javascript:EvalSound('estrela2');">
              <img src="images/Estrela.png" style="width:90px">
            </a>
          </div>
          <div class="ceu_estrela3">
            <a href="javascript:EvalSound('estrela3');">
              <img src="images/Estrela.png" style="width:90px">
            </a>
          </div>
          <div class="ceu_estrela4">
            <a href="javascript:EvalSound('estrela4');">
              <img src="images/Estrela.png" style="width:90px">
            </a>            
          </div>
          <div class="ceu_estrela5">
            <a href="javascript:EvalSound('estrela5');">
              <img src="images/Estrela.png" style="width:90px">
            </a>
          </div>
        </div>
      </ons-page>
    </div>
    
    <div style="display:none" id="terra">  
      <ons-page style="background-image:url('./images/Pomar_fundo.jpg');background-size:cover">
        <div class="left">
          <ons-icon icon="ion-navicon" style="font-size: 32px; width: 1em; color: silver; padding-left: 10px;" onclick="document.querySelector('ons-splitter').toggleLeft();"></ons-icon>
        </div>
        <div class="pure-g" id="containerterra" style="height:100%;width: auto;">
          <div>
            <audio id='terra1' src='mp3/A2.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='terra2' src='mp3/C2.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='terra3' src='mp3/C4.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='terra4' src='mp3/C5.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='terra5' src='mp3/C3.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
          </div>
          <div class="terra_maca1">
            <a href="javascript:EvalSound('terra1');">
              <img src="images/Maca.png" style="width:70px">
            </a>
          </div>
          <div class="terra_maca2">
            <a href="javascript:EvalSound('terra2');">
              <img src="images/Maca.png" style="width:70px">
            </a>
          </div>
          <div class="terra_maca3">
            <a href="javascript:EvalSound('terra3');">
              <img src="images/Maca.png" style="width:70px">
            </a>
          </div>
          <div class="terra_maca4">
            <a href="javascript:EvalSound('terra4');">
              <img src="images/Maca.png" style="width:70px">
            </a>
          </div>
          <div class="terra_maca5">
            <a href="javascript:EvalSound('terra5');">
              <img src="images/Maca.png" style="width:70px">
            </a>
          </div>
        </div>
      </ons-page>
    </div>
    
    <div style="display:none" id="neve">  
      <ons-page style="background-image:url('./images/Neve_fundo.jpg'); background-size:cover">
        <div class="left">
          <ons-icon icon="ion-navicon" style="font-size: 32px; width: 1em; color: silver; padding-left: 10px;" onclick="document.querySelector('ons-splitter').toggleLeft();"></ons-icon>
        </div>
        <div class="pure-g" id="containerneve" style="height:100%;width: auto; ">
          <div>
            <audio id='neve1' src='mp3/A1.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='neve2' src='mp3/B4.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='neve3' src='mp3/B5.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='neve4' src='mp3/B3.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='neve5' src='mp3/B2.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
          </div>
          <div class="neve_1">
            <a href="javascript:EvalSound('neve1');">
              <img src="images/Botao_grande.png" style="width:40px">
            </a>
          </div>
          <div class="neve_2">
            <a href="javascript:EvalSound('neve2');">
              <img src="images/Botao_grande.png" style="width:50px">
            </a>
          </div>
          <div class="neve_3">
            <a href="javascript:EvalSound('neve3');">
              <img src="images/Botao_grande.png" style="width:50px">
            </a>
          </div>
          <div class="neve_4">
            <a href="javascript:EvalSound('neve4');">
              <img src="images/Botao_grande.png" style="width:50px">
            </a>
          </div>
          <div class="neve_5">
            <a href="javascript:EvalSound('neve5');">
              <img src="images/Botao_grande.png" style="width:50px">
            </a>
          </div>
        </div>
      </ons-page>
    </div>

   <div style="display:none" id="circo">  
      <ons-page style="background-image:url('./images/Circo_fundo.jpg'); background-size:cover">
        <div class="left">
          <ons-icon icon="ion-navicon" style="font-size: 32px; width: 1em; color: silver; padding-left: 10px;" onclick="document.querySelector('ons-splitter').toggleLeft();"></ons-icon>
        </div>
        <div class="pure-g" id="containerneve" style="height:100%;width: auto; ">
          <div>
            <audio id='circo1' src='mp3/D5.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='circo2' src='mp3/D2.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='circo3' src='mp3/D1.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='circo4' src='mp3/D3.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='circo5' src='mp3/D4.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
          </div>
          <div class="circo_1">
            <a href="javascript:EvalSound('circo1');">
              <img src="images/Bola.png" style="width:50px">
            </a>
          </div>
          <div class="circo_2">
            <a href="javascript:EvalSound('circo2');">
              <img src="images/Bola.png" style="width:50px">
            </a>
          </div>
          <div class="circo_3">
            <a href="javascript:EvalSound('circo3');">
              <img src="images/Bola.png" style="width:50px">
            </a>
          </div>
          <div class="circo_4">
            <a href="javascript:EvalSound('circo4');">
              <img src="images/Bola.png" style="width:50px">
            </a>
          </div>
          <div class="circo_5">
            <a href="javascript:EvalSound('circo5');">
              <img src="images/Bola.png" style="width:50px">
            </a>
          </div>
        </div>
      </ons-page>
    </div>

    <div style="display:none" id="estendal">  
      <ons-page style="background-image:url('./images/estendal_fundo.jpg'); background-size:cover">
        <div class="left">
          <ons-icon icon="ion-navicon" style="font-size: 32px; width: 1em; color: silver; padding-left: 10px;" onclick="document.querySelector('ons-splitter').toggleLeft();"></ons-icon>
        </div>
        <div class="pure-g" id="containerneve" style="height:100%;width: auto; ">
          <div>
            <audio id='estendal1' src='mp3/D1.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='estendal2' src='mp3/F4.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='estendal3' src='mp3/F2.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='estendal4' src='mp3/F1.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='estendal5' src='mp3/F3.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
          </div>
          <div class="estendal_1">
            <a href="javascript:EvalSound('estendal1');">
              <img src="images/meias.png" style="width:70px">
            </a>
          </div>
          <div class="estendal_2">
            <a href="javascript:EvalSound('estendal2');">
              <img src="images/meias.png" style="width:70px">
            </a>
          </div>
          <div class="estendal_3">
            <a href="javascript:EvalSound('estendal3');">
              <img src="images/meias.png" style="width:70px">
            </a>
          </div>
          <div class="estendal_4">
            <a href="javascript:EvalSound('estendal4');">
              <img src="images/meias.png" style="width:70px">
            </a>
          </div>
          <div class="estendal_5">
            <a href="javascript:EvalSound('estendal5');">
              <img src="images/meias.png" style="width:70px">
            </a>
          </div>
        </div>
      </ons-page>
    </div>

<div style="display:none" id="mar">  
      <ons-page style="background-image:url('./images/mar_fundo.jpg'); background-size:cover">
        <div class="left">
          <ons-icon icon="ion-navicon" style="font-size: 32px; width: 1em; color: silver; padding-left: 10px;" onclick="document.querySelector('ons-splitter').toggleLeft();"></ons-icon>
        </div>
        <div class="pure-g" id="containerneve" style="height:100%;width: auto; ">
          <div>
            <audio id='mar1' src='mp3/D2.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='mar2' src='mp3/E1.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='mar3' src='mp3/E4.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='mar4' src='mp3/E3.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
            <audio id='mar5' src='mp3/E2.mp3' ontimeupdate='updateTrackTime(this);' hidden controls></audio>
          </div>
          <div class="mar_1">
            <a href="javascript:EvalSound('mar1');">
              <img src="images/peixeamarelo.png" style="width:200px">
            </a>
          </div>
          <div class="mar_2">
            <a href="javascript:EvalSound('mar2');">
              <img src="images/peixeamarelo.png" style="width:200px">
            </a>
          </div>
          <div class="mar_3">
            <a href="javascript:EvalSound('mar3');">
              <img src="images/peixeamarelo.png" style="width:200px">
            </a>
          </div>
          <div class="mar_4">
            <a href="javascript:EvalSound('mar4');">
              <img src="images/peixeamarelo.png" style="width:200px">
            </a>
          </div>
          <div class="mar_5">
            <a href="javascript:EvalSound('mar5');">
              <img src="images/peixeamarelo.png" style="width:200px">
            </a>
          </div>
        </div>
      </ons-page>
    </div>

    <div style="display:none" id="sobre">  
      <ons-page>
        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button>
              <ons-icon icon="ion-navicon" style="font-size: 32px; width: 1em;" onclick="document.querySelector('ons-splitter').toggleLeft();"></ons-icon>
            </ons-toolbar-button>
          </div>
          <div class="center">SOBRE</div>
        </ons-toolbar>
  
        <div style="height:100%; padding:10px; font-size:small">
        Como é que as palavras e a melodia de uma canção interagem na nossa memória? O que prevalece no reconhecimento auditivo de uma canção quando as palavras e a melodia são manipuladas?<br><br>
        Esta aplicação foi concebida no âmbito do Doutoramento em Ciências Musicais para o projeto intitulado "Estratégias de ensino de canções a crianças e adultos: Influência no reconhecimento auditivo e desempenho vocal"<br>
        (doutoranda: Ana Isabel Pereira; orientadora: Profª Helena Rodrigues; FCSH-UNL)<br><br>
        Aplicação desenvolvida por João Carmo Pereira.<br>
        Ilustrações de Rui Aleixo.<br>
        Voz de Ana Isabel Pereira.<br>
        <br>
        Fevereiro 2015
        <br><br>
        Alludo<br>
        <a href="#" onclick="window.open('https://www.facebook.com/alludoapp/', '_blank', 'location=no');"><img src="images/fb_icon.png" style="width:50px" alt="" /></a><br><br>

      </div>
      </ons-page>
    </div>
  </ons-splitter-content>
</ons-splitter>

  
<script>
onBrowser = false;

if (navigator.userAgent.match(/(Android)/)) {
        document.addEventListener("deviceready", onDeviceReady, false);
        showAndoidItems();
        onBrowser = false;
    } else if (navigator.userAgent.match(/(iPhone|iPod|iPad|BlackBerry)/)) {
       document.addEventListener("deviceready", onDeviceReady, false);
       onBrowser = false;
    } else {
       onDeviceReady();
       onBrowser = true;
    }

function onDeviceReady() {
  
  //console.log('teste');
  clearDIV();
  mostraDIV('ceu');
  document.querySelector('ons-splitter').toggleLeft();
  
  if (typeof blabla === 'undefined' || blabla === null) {
    // variable is undefined or null
    //console.log('device: '+device.uuid);
}
  
  //checkConnection();
}

function showAndoidItems() {
  $('#android_exit').show();
}
   
function mostraDIV(div){
  //console.log('sobre');  
  document.querySelector('ons-splitter').toggleLeft();
  clearDIV();
  $('#'+div).css("display", "block");
}
   
function progress(percent, $element) {
  var progressBarWidth = percent * $element.width() / 100;
  $element.find('div').animate({ width: progressBarWidth }, 500).html();
}

var currentPlayer;

function EvalSound(soundobj) {

  var thissound=document.getElementById(soundobj);
  if(currentPlayer && currentPlayer != thissound) {
    currentPlayer.pause(); 
  }
  if (thissound.paused)
    thissound.play();
  else
    thissound.pause();
    thissound.currentTime = 0;
    currentPlayer = thissound;
  }

function updateTrackTime(track){
  var progr = Math.round(((track.currentTime * 1000) * 100 ) / (track.duration * 1000));
  
  //x and y are both integers
  var remainder = progr % 1;
  if (remainder == 0){
  //x is a multiple of y
  //progress(progr, $('#'+track.id+'Bar'));
  $('#'+track.id+'Bar').width("" + progr +"% ");

  } else {
  //x is not a multiple of y
  }
  
  if (progr == 100){
    setTimeout(
    function() 
    {
      $('#'+track.id+'Bar').width(" 0% ");
    }, 1000);
  }
    
//  if (isNaN(duration)){
//    $('#'+track.id+'Bar').width(" 0% ");
//  }
}
    
    function clearDIV() {
      $('#ceu').css("display", "none");
      $('#terra').css("display", "none");
      $('#neve').css("display", "none");
      $('#sobre').css("display", "none");
    }
    
   function checkConnection() {
    var networkState = navigator.connection.type;

    var states = {};
    states[Connection.UNKNOWN]  = 'Unknown connection';
    states[Connection.ETHERNET] = 'Ethernet connection';
    states[Connection.WIFI]     = 'WiFi connection';
    states[Connection.CELL_2G]  = 'Cell 2G connection';
    states[Connection.CELL_3G]  = 'Cell 3G connection';
    states[Connection.CELL_4G]  = 'Cell 4G connection';
    states[Connection.CELL]     = 'Cell generic connection';
    states[Connection.NONE]     = 'No network connection';

    console.log('Connection type: ' + states[networkState]);
    }
    
    document.addEventListener("offline", onOffline, false);
    
    function onOffline() {
      console.log('offline');
      // Handle the offline event
    }
    
    document.addEventListener("online", onOnline, false);
    
    function onOnline() {
      console.log('online');
      // Handle the online event
    }
    
    document.addEventListener("backbutton", onBackKeyDown, false);
    
    function onBackKeyDown() {
      document.querySelector('ons-splitter').toggleLeft();
    }
    
    /*
      name : device.name,
      cordova: device.cordova,
      platform : device.platform,
      uuid: device.uuid,
      model: device.model,
      version: device.version
    */

  $('.pedidoweb').click(function (event){
    var url = $(this).attr("href");
    var windowName = "popUp";//$(this).attr("name");
    var windowSize = windowSizeArray[$(this).attr("rel")];
    window.open(url, windowName, windowSize);
    event.preventDefault();
    });

</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  if (onBrowser) {
    console.log('browser');
    ga('create', 'UA-485362-14', 'auto');
  }
  else {
    console.log('telemovel');
      try {
        ga('create', 'UA-485362-14', {'clientId': device.uuid}); 
      } catch(err) {
        ga('create', 'UA-485362-14', 'auto');
      }
  }
  ga('send', 'pageview');
</script>
  
</body>
</html>
